import _extends from "reshow-runtime/es/helpers/extends";
import _objectWithoutProperties from "reshow-runtime/es/helpers/objectWithoutProperties";
var _excluded = ["type", "className", "children", "horizontal"];
import React, { Children, cloneElement } from "react";
import { mixClass } from "class-lib";
import SemanticUI from "../molecules/SemanticUI";
import useCSS from "../../src/useCSS";

var renderChildren = function renderChildren(children, pAtom, horizontal) {
  return Children.map(children, function (child) {
    if (!child) {
      return null;
    }

    if ("ul" === pAtom || "ol" === pAtom) {
      child = /*#__PURE__*/cloneElement(child, {
        atom: "li"
      });
    } else if ("table" === pAtom) {
      child = /*#__PURE__*/cloneElement(child, {
        atom: "td"
      });

      if (!horizontal) {
        child = /*#__PURE__*/React.createElement("tr", null, child);
      }
    }

    return child;
  });
};

var List = function List(props) {
  useCSS(["list"], "semantic");
  /**
   * Why need type?
   *
   * List not the only type, such as segments.
   * https://semantic-ui.com/elements/segment.html#raised-segments
   *
   */

  var _props$type = props.type,
      type = _props$type === void 0 ? "list" : _props$type,
      className = props.className,
      children = props.children,
      horizontal = props.horizontal,
      others = _objectWithoutProperties(props, _excluded);

  var atom = props.atom;
  var classes = mixClass(className, type, {
    horizontal: horizontal
  });
  var child = renderChildren(children, atom, horizontal);

  if (atom === "table") {
    if (child) {
      if (horizontal) {
        child = /*#__PURE__*/React.createElement("tbody", null, /*#__PURE__*/React.createElement("tr", null, child));
      } else {
        child = /*#__PURE__*/React.createElement("tbody", null, child);
      }
    }
  }

  return /*#__PURE__*/React.createElement(SemanticUI, _extends({}, others, {
    className: classes
  }), child);
};

export default List;