"use strict";

var _interopRequireDefault = require("reshow-runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("reshow-runtime/helpers/interopRequireWildcard");

var _toConsumableArray2 = _interopRequireDefault(require("reshow-runtime/helpers/toConsumableArray"));

var _react = _interopRequireWildcard(require("react"));

var _chai = require("chai");

var _reshowUnit = require("reshow-unit");

var _index = _interopRequireDefault(require("../index"));

var _div, _div2, _div3, _div4, _div5, _div6, _div7, _div8, _div9, _div10, _i, _span, _span2, _span3;

describe("Test build array", function () {
  it("test with multi children", function () {
    var FakeDom = function FakeDom(_ref) {
      var children = _ref.children;
      return /*#__PURE__*/_react["default"].createElement("div", null, (0, _index["default"])(children)({
        title: "foo"
      }));
    };

    var vDom = /*#__PURE__*/_react["default"].createElement(FakeDom, null, _div || (_div = /*#__PURE__*/_react["default"].createElement("div", null, "1")), _div2 || (_div2 = /*#__PURE__*/_react["default"].createElement("div", null, "2")));

    var wrap = (0, _reshowUnit.shallow)(vDom);
    (0, _chai.expect)(wrap.html()).to.equal('<div><div title="foo">1</div><div title="foo">2</div></div>');
  });
  it("test with multi function", function () {
    var FakeDom = function FakeDom(_ref2) {
      var children = _ref2.children;
      (0, _chai.expect)(_react.Children.count(children)).to.equal(2);
      return /*#__PURE__*/_react["default"].createElement("div", null, (0, _index["default"])(children)({
        foo: _div3 || (_div3 = /*#__PURE__*/_react["default"].createElement("div", null, "foo")),
        bar: _div4 || (_div4 = /*#__PURE__*/_react["default"].createElement("div", null, "bar"))
      }));
    };

    var vDom = /*#__PURE__*/_react["default"].createElement(FakeDom, null, function (_ref3) {
      var foo = _ref3.foo;
      return foo;
    }, _div5 || (_div5 = /*#__PURE__*/_react["default"].createElement("div", null)), _div6 || (_div6 = /*#__PURE__*/_react["default"].createElement("div", null)), function (_ref4) {
      var bar = _ref4.bar;
      return bar;
    });

    var wrap = (0, _reshowUnit.shallow)(vDom);
    (0, _chai.expect)(wrap.html()).to.equal('<div><div>foo</div><div foo="[object Object]" bar="[object Object]"></div><div foo="[object Object]" bar="[object Object]"></div><div>bar</div></div>');
  });
  it("test with multi Component instance", function () {
    var FakeDom = function FakeDom(_ref5) {
      var children = _ref5.children;
      (0, _chai.expect)(_react.Children.count(children)).to.equal(2);
      return /*#__PURE__*/_react["default"].createElement("div", null, (0, _index["default"])(children)({
        foo: _div7 || (_div7 = /*#__PURE__*/_react["default"].createElement("div", null, "foo")),
        bar: _div8 || (_div8 = /*#__PURE__*/_react["default"].createElement("div", null, "bar"))
      }));
    };

    var A = function A(_ref6) {
      var foo = _ref6.foo;
      return foo;
    };

    var B = function B(_ref7) {
      var bar = _ref7.bar;
      return bar;
    };

    var vDom = /*#__PURE__*/_react["default"].createElement(FakeDom, null, A, _div9 || (_div9 = /*#__PURE__*/_react["default"].createElement("div", null)), _div10 || (_div10 = /*#__PURE__*/_react["default"].createElement("div", null)), B);

    var wrap = (0, _reshowUnit.shallow)(vDom);
    (0, _chai.expect)(wrap.html()).to.equal('<div><div>foo</div><div foo="[object Object]" bar="[object Object]"></div><div foo="[object Object]" bar="[object Object]"></div><div>bar</div></div>');
  });
  it("test with sub array", function () {
    var FakeDom = function FakeDom(_ref8) {
      var children = _ref8.children;
      var arr = [_i || (_i = /*#__PURE__*/_react["default"].createElement("i", null))].concat((0, _toConsumableArray2["default"])(_react.Children.map(children, function (c) {
        return c;
      }) || []));
      return /*#__PURE__*/_react["default"].createElement("div", null, (0, _index["default"])(arr)({
        "data-foo": "bar"
      }));
    };

    var vDom = /*#__PURE__*/_react["default"].createElement(FakeDom, null, _span || (_span = /*#__PURE__*/_react["default"].createElement("span", null)), _span2 || (_span2 = /*#__PURE__*/_react["default"].createElement("span", null)));

    var wrap = (0, _reshowUnit.shallow)(vDom);
    (0, _chai.expect)(wrap.html()).to.equal('<div><i data-foo="bar"></i><span data-foo="bar"></span><span data-foo="bar"></span></div>');

    var vDom2 = /*#__PURE__*/_react["default"].createElement(FakeDom, null, _span3 || (_span3 = /*#__PURE__*/_react["default"].createElement("span", null)));

    var wrap2 = (0, _reshowUnit.shallow)(vDom2);
    (0, _chai.expect)(wrap2.html()).to.equal('<div><i data-foo="bar"></i><span data-foo="bar"></span></div>');

    var vDom3 = /*#__PURE__*/_react["default"].createElement(FakeDom, null);

    var wrap3 = (0, _reshowUnit.shallow)(vDom3);
    (0, _chai.expect)(wrap3.html()).to.equal('<div><i data-foo="bar"></i></div>');
  });
});