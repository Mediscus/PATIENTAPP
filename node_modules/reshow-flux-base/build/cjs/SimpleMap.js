"use strict";

var _interopRequireDefault = require("reshow-runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _objectSpread3 = _interopRequireDefault(require("reshow-runtime/helpers/objectSpread2"));

var _typeof2 = _interopRequireDefault(require("reshow-runtime/helpers/typeof"));

var _classCallCheck2 = _interopRequireDefault(require("reshow-runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("reshow-runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("reshow-runtime/helpers/defineProperty"));

var _getObjectValue = require("get-object-value");

var _reshowConstant = require("reshow-constant");

var SimpleMap = /*#__PURE__*/function () {
  function SimpleMap(obj) {
    (0, _classCallCheck2["default"])(this, SimpleMap);
    (0, _defineProperty2["default"])(this, "_state", {});

    if (obj) {
      this._state = obj;
    }
  }

  (0, _createClass2["default"])(SimpleMap, [{
    key: "get",
    value: function get(k) {
      return _reshowConstant.OBJECT === (0, _typeof2["default"])(this._state[k]) && null !== this._state[k] ? new SimpleMap(this._state[k]) : this._state[k];
    }
  }, {
    key: "set",
    value: function set(k, v) {
      var state = (0, _objectSpread3["default"])((0, _objectSpread3["default"])({}, this._state), {}, (0, _defineProperty2["default"])({}, k, (0, _getObjectValue.toJS)(v)));
      this._state = state;
      return new SimpleMap(state);
    }
  }, {
    key: "delete",
    value: function _delete(k) {
      var state = (0, _objectSpread3["default"])({}, this._state);
      delete state[k];
      this._state = state;
      return new SimpleMap(state);
    }
  }, {
    key: "merge",
    value: function merge(arr) {
      var state = (0, _objectSpread3["default"])((0, _objectSpread3["default"])({}, this._state), (0, _getObjectValue.toJS)(arr));
      this._state = state;
      return new SimpleMap(state);
    }
  }, {
    key: "toJS",
    value: function toJS() {
      return this._state;
    }
  }]);
  return SimpleMap;
}();

var _default = SimpleMap;
exports["default"] = _default;
module.exports = exports.default;