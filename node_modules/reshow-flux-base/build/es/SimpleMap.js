import _objectSpread from "reshow-runtime/es/helpers/objectSpread2";
import _typeof from "reshow-runtime/es/helpers/typeof";
import _classCallCheck from "reshow-runtime/es/helpers/classCallCheck";
import _createClass from "reshow-runtime/es/helpers/createClass";
import _defineProperty from "reshow-runtime/es/helpers/defineProperty";
import { toJS } from "get-object-value";
import { OBJECT } from "reshow-constant";

var SimpleMap = /*#__PURE__*/function () {
  function SimpleMap(obj) {
    _classCallCheck(this, SimpleMap);

    _defineProperty(this, "_state", {});

    if (obj) {
      this._state = obj;
    }
  }

  _createClass(SimpleMap, [{
    key: "get",
    value: function get(k) {
      return OBJECT === _typeof(this._state[k]) && null !== this._state[k] ? new SimpleMap(this._state[k]) : this._state[k];
    }
  }, {
    key: "set",
    value: function set(k, v) {
      var state = _objectSpread(_objectSpread({}, this._state), {}, _defineProperty({}, k, toJS(v)));

      this._state = state;
      return new SimpleMap(state);
    }
  }, {
    key: "delete",
    value: function _delete(k) {
      var state = _objectSpread({}, this._state);

      delete state[k];
      this._state = state;
      return new SimpleMap(state);
    }
  }, {
    key: "merge",
    value: function merge(arr) {
      var state = _objectSpread(_objectSpread({}, this._state), toJS(arr));

      this._state = state;
      return new SimpleMap(state);
    }
  }, {
    key: "toJS",
    value: function toJS() {
      return this._state;
    }
  }]);

  return SimpleMap;
}();

export default SimpleMap;